{"ast":null,"code":"var _jsxFileName = \"D:\\\\Personal_Projects\\\\Vehicle Tracking\\\\Development2.0\\\\JFRD-ULTRAKER\\\\traccar-web\\\\modern\\\\src\\\\reports\\\\ReportFilter.js\";\nimport React, { useState } from 'react';\nimport { FormControl, InputLabel, Select, MenuItem, Button, TextField, Grid, Typography } from '@material-ui/core';\nimport { useSelector } from 'react-redux';\nimport moment from 'moment';\nimport t from '../common/localization';\n\nconst ReportFilter = _ref => {\n  let {\n    children,\n    handleSubmit,\n    showOnly\n  } = _ref;\n  const devices = useSelector(state => Object.values(state.devices.items));\n  const [deviceId, setDeviceId] = useState();\n  const [period, setPeriod] = useState('today');\n  const [from, setFrom] = useState(moment().subtract(1, 'hour'));\n  const [to, setTo] = useState(moment());\n\n  const handleClick = (mail, json) => {\n    let selectedFrom;\n    let selectedTo;\n\n    switch (period) {\n      case 'today':\n        selectedFrom = moment().startOf('day');\n        selectedTo = moment().endOf('day');\n        break;\n\n      case 'yesterday':\n        selectedFrom = moment().subtract(1, 'day').startOf('day');\n        selectedTo = moment().subtract(1, 'day').endOf('day');\n        break;\n\n      case 'thisWeek':\n        selectedFrom = moment().startOf('week');\n        selectedTo = moment().endOf('week');\n        break;\n\n      case 'previousWeek':\n        selectedFrom = moment().subtract(1, 'week').startOf('week');\n        selectedTo = moment().subtract(1, 'week').endOf('week');\n        break;\n\n      case 'thisMonth':\n        selectedFrom = moment().startOf('month');\n        selectedTo = moment().endOf('month');\n        break;\n\n      case 'previousMonth':\n        selectedFrom = moment().subtract(1, 'month').startOf('month');\n        selectedTo = moment().subtract(1, 'month').endOf('month');\n        break;\n\n      default:\n        selectedFrom = from;\n        selectedTo = to;\n        break;\n    }\n\n    const accept = json ? 'application/json' : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n    handleSubmit(deviceId, selectedFrom.toISOString(), selectedTo.toISOString(), mail, {\n      Accept: accept\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    justify: \"flex-end\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: period === 'custom' ? 3 : 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"filled\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, t('reportDevice')), /*#__PURE__*/React.createElement(Select, {\n    value: deviceId,\n    onChange: e => setDeviceId(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, devices.map(device => /*#__PURE__*/React.createElement(MenuItem, {\n    value: device.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, device.name))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: period === 'custom' ? 3 : 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"filled\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, t('reportPeriod')), /*#__PURE__*/React.createElement(Select, {\n    value: period,\n    onChange: e => setPeriod(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"today\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, t('reportToday')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"yesterday\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, t('reportYesterday')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"thisWeek\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, t('reportThisWeek')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"previousWeek\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, t('reportPreviousWeek')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"thisMonth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, t('reportThisMonth')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"previousMonth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, t('reportPreviousMonth')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"custom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, t('reportCustom'))))), period === 'custom' && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"filled\",\n    label: t('reportFrom'),\n    type: \"datetime-local\",\n    value: from.format(moment.HTML5_FMT.DATETIME_LOCAL),\n    onChange: e => setFrom(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL)),\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  })), period === 'custom' && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    variant: \"filled\",\n    label: t('reportTo'),\n    type: \"datetime-local\",\n    value: to.format(moment.HTML5_FMT.DATETIME_LOCAL),\n    onChange: e => setTo(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL)),\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  })), children, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: !showOnly ? 4 : 12,\n    sm: !showOnly ? 2 : 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => handleClick(false, true),\n    variant: \"outlined\",\n    color: \"secondary\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, t('reportShow'))), !showOnly && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 4,\n    sm: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => handleClick(false, false),\n    variant: \"outlined\",\n    color: \"secondary\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, t('reportExport'))), !showOnly && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 4,\n    sm: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => handleClick(true, false),\n    variant: \"outlined\",\n    color: \"secondary\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"button\",\n    noWrap: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, t('reportEmail')))));\n};\n\nexport default ReportFilter;","map":{"version":3,"sources":["D:/Personal_Projects/Vehicle Tracking/Development2.0/JFRD-ULTRAKER/traccar-web/modern/src/reports/ReportFilter.js"],"names":["React","useState","FormControl","InputLabel","Select","MenuItem","Button","TextField","Grid","Typography","useSelector","moment","t","ReportFilter","children","handleSubmit","showOnly","devices","state","Object","values","items","deviceId","setDeviceId","period","setPeriod","from","setFrom","subtract","to","setTo","handleClick","mail","json","selectedFrom","selectedTo","startOf","endOf","accept","toISOString","Accept","e","target","value","map","device","id","name","format","HTML5_FMT","DATETIME_LOCAL"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  FormControl, InputLabel, Select, MenuItem, Button, TextField, Grid, Typography,\r\n} from '@material-ui/core';\r\nimport { useSelector } from 'react-redux';\r\nimport moment from 'moment';\r\nimport t from '../common/localization';\r\n\r\nconst ReportFilter = ({ children, handleSubmit, showOnly }) => {\r\n  const devices = useSelector((state) => Object.values(state.devices.items));\r\n  const [deviceId, setDeviceId] = useState();\r\n  const [period, setPeriod] = useState('today');\r\n  const [from, setFrom] = useState(moment().subtract(1, 'hour'));\r\n  const [to, setTo] = useState(moment());\r\n\r\n  const handleClick = (mail, json) => {\r\n    let selectedFrom;\r\n    let selectedTo;\r\n    switch (period) {\r\n      case 'today':\r\n        selectedFrom = moment().startOf('day');\r\n        selectedTo = moment().endOf('day');\r\n        break;\r\n      case 'yesterday':\r\n        selectedFrom = moment().subtract(1, 'day').startOf('day');\r\n        selectedTo = moment().subtract(1, 'day').endOf('day');\r\n        break;\r\n      case 'thisWeek':\r\n        selectedFrom = moment().startOf('week');\r\n        selectedTo = moment().endOf('week');\r\n        break;\r\n      case 'previousWeek':\r\n        selectedFrom = moment().subtract(1, 'week').startOf('week');\r\n        selectedTo = moment().subtract(1, 'week').endOf('week');\r\n        break;\r\n      case 'thisMonth':\r\n        selectedFrom = moment().startOf('month');\r\n        selectedTo = moment().endOf('month');\r\n        break;\r\n      case 'previousMonth':\r\n        selectedFrom = moment().subtract(1, 'month').startOf('month');\r\n        selectedTo = moment().subtract(1, 'month').endOf('month');\r\n        break;\r\n      default:\r\n        selectedFrom = from;\r\n        selectedTo = to;\r\n        break;\r\n    }\r\n\r\n    const accept = json ? 'application/json' : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\r\n    handleSubmit(\r\n      deviceId,\r\n      selectedFrom.toISOString(),\r\n      selectedTo.toISOString(),\r\n      mail,\r\n      { Accept: accept },\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Grid container spacing={2} justify=\"flex-end\">\r\n      <Grid item xs={12} sm={period === 'custom' ? 3 : 6}>\r\n        <FormControl variant=\"filled\" fullWidth>\r\n          <InputLabel>{t('reportDevice')}</InputLabel>\r\n          <Select value={deviceId} onChange={(e) => setDeviceId(e.target.value)}>\r\n            {devices.map((device) => (\r\n              <MenuItem value={device.id}>{device.name}</MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item xs={12} sm={period === 'custom' ? 3 : 6}>\r\n        <FormControl variant=\"filled\" fullWidth>\r\n          <InputLabel>{t('reportPeriod')}</InputLabel>\r\n          <Select value={period} onChange={(e) => setPeriod(e.target.value)}>\r\n            <MenuItem value=\"today\">{t('reportToday')}</MenuItem>\r\n            <MenuItem value=\"yesterday\">{t('reportYesterday')}</MenuItem>\r\n            <MenuItem value=\"thisWeek\">{t('reportThisWeek')}</MenuItem>\r\n            <MenuItem value=\"previousWeek\">{t('reportPreviousWeek')}</MenuItem>\r\n            <MenuItem value=\"thisMonth\">{t('reportThisMonth')}</MenuItem>\r\n            <MenuItem value=\"previousMonth\">{t('reportPreviousMonth')}</MenuItem>\r\n            <MenuItem value=\"custom\">{t('reportCustom')}</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n      </Grid>\r\n      {period === 'custom' && (\r\n      <Grid item xs={12} sm={3}>\r\n        <TextField\r\n          variant=\"filled\"\r\n          label={t('reportFrom')}\r\n          type=\"datetime-local\"\r\n          value={from.format(moment.HTML5_FMT.DATETIME_LOCAL)}\r\n          onChange={(e) => setFrom(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\r\n          fullWidth\r\n        />\r\n      </Grid>\r\n      )}\r\n      {period === 'custom' && (\r\n      <Grid item xs={12} sm={3}>\r\n        <TextField\r\n          variant=\"filled\"\r\n          label={t('reportTo')}\r\n          type=\"datetime-local\"\r\n          value={to.format(moment.HTML5_FMT.DATETIME_LOCAL)}\r\n          onChange={(e) => setTo(moment(e.target.value, moment.HTML5_FMT.DATETIME_LOCAL))}\r\n          fullWidth\r\n        />\r\n      </Grid>\r\n      )}\r\n      {children}\r\n      <Grid item xs={!showOnly ? 4 : 12} sm={!showOnly ? 2 : 6}>\r\n        <Button\r\n          onClick={() => handleClick(false, true)}\r\n          variant=\"outlined\"\r\n          color=\"secondary\"\r\n          fullWidth\r\n        >\r\n          {t('reportShow')}\r\n        </Button>\r\n      </Grid>\r\n      {!showOnly\r\n        && (\r\n        <Grid item xs={4} sm={2}>\r\n          <Button\r\n            onClick={() => handleClick(false, false)}\r\n            variant=\"outlined\"\r\n            color=\"secondary\"\r\n            fullWidth\r\n          >\r\n            {t('reportExport')}\r\n          </Button>\r\n        </Grid>\r\n        )}\r\n      {!showOnly\r\n        && (\r\n        <Grid item xs={4} sm={2}>\r\n          <Button\r\n            onClick={() => handleClick(true, false)}\r\n            variant=\"outlined\"\r\n            color=\"secondary\"\r\n            fullWidth\r\n          >\r\n            <Typography variant=\"button\" noWrap>{t('reportEmail')}</Typography>\r\n          </Button>\r\n        </Grid>\r\n        )}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ReportFilter;\r\n"]},"metadata":{},"sourceType":"module"}