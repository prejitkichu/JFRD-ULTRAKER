{"ast":null,"code":"export class SwitcherControl {\n  constructor(styles, defaultStyle, beforeSwitch, afterSwitch) {\n    this.styles = styles;\n    this.defaultStyle = defaultStyle;\n    this.beforeSwitch = beforeSwitch;\n    this.afterSwitch = afterSwitch;\n    this.onDocumentClick = this.onDocumentClick.bind(this);\n  }\n\n  getDefaultPosition() {\n    return 'top-right';\n  }\n\n  onAdd(map) {\n    this.map = map;\n    this.controlContainer = document.createElement('div');\n    this.controlContainer.classList.add('maplibregl-ctrl');\n    this.controlContainer.classList.add('maplibregl-ctrl-group');\n    this.mapStyleContainer = document.createElement('div');\n    this.styleButton = document.createElement('button');\n    this.styleButton.type = 'button';\n    this.mapStyleContainer.classList.add('maplibregl-style-list');\n\n    for (const style of this.styles) {\n      const styleElement = document.createElement('button');\n      styleElement.type = 'button';\n      styleElement.innerText = style.title;\n      styleElement.classList.add(style.title.replace(/[^a-z0-9-]/gi, '_'));\n      styleElement.dataset.uri = JSON.stringify(style.uri);\n      styleElement.addEventListener('click', event => {\n        const {\n          srcElement\n        } = event;\n\n        if (srcElement.classList.contains('active')) {\n          return;\n        }\n\n        this.beforeSwitch();\n        this.map.setStyle(JSON.parse(srcElement.dataset.uri));\n        this.afterSwitch();\n        this.mapStyleContainer.style.display = 'none';\n        this.styleButton.style.display = 'block';\n        const elms = this.mapStyleContainer.getElementsByClassName('active');\n\n        while (elms[0]) {\n          elms[0].classList.remove('active');\n        }\n\n        srcElement.classList.add('active');\n      });\n\n      if (style.title === this.defaultStyle) {\n        styleElement.classList.add('active');\n      }\n\n      this.mapStyleContainer.appendChild(styleElement);\n    }\n\n    this.styleButton.classList.add('maplibregl-ctrl-icon');\n    this.styleButton.classList.add('maplibregl-style-switcher');\n    this.styleButton.addEventListener('click', () => {\n      this.styleButton.style.display = 'none';\n      this.mapStyleContainer.style.display = 'block';\n    });\n    document.addEventListener('click', this.onDocumentClick);\n    this.controlContainer.appendChild(this.styleButton);\n    this.controlContainer.appendChild(this.mapStyleContainer);\n    return this.controlContainer;\n  }\n\n  onRemove() {\n    if (!this.controlContainer || !this.controlContainer.parentNode || !this.map || !this.styleButton) {\n      return;\n    }\n\n    this.styleButton.removeEventListener('click', this.onDocumentClick);\n    this.controlContainer.parentNode.removeChild(this.controlContainer);\n    document.removeEventListener('click', this.onDocumentClick);\n    this.map = undefined;\n  }\n\n  onDocumentClick(event) {\n    if (this.controlContainer && !this.controlContainer.contains(event.target) && this.mapStyleContainer && this.styleButton) {\n      this.mapStyleContainer.style.display = 'none';\n      this.styleButton.style.display = 'block';\n    }\n  }\n\n}","map":{"version":3,"sources":["D:/Personal_Projects/Vehicle Tracking/Development2.0/JFRD-ULTRAKER/traccar-web/modern/src/map/switcher/switcher.js"],"names":["SwitcherControl","constructor","styles","defaultStyle","beforeSwitch","afterSwitch","onDocumentClick","bind","getDefaultPosition","onAdd","map","controlContainer","document","createElement","classList","add","mapStyleContainer","styleButton","type","style","styleElement","innerText","title","replace","dataset","uri","JSON","stringify","addEventListener","event","srcElement","contains","setStyle","parse","display","elms","getElementsByClassName","remove","appendChild","onRemove","parentNode","removeEventListener","removeChild","undefined","target"],"mappings":"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","sourcesContent":["export class SwitcherControl {\r\n  constructor(styles, defaultStyle, beforeSwitch, afterSwitch) {\r\n    this.styles = styles;\r\n    this.defaultStyle = defaultStyle;\r\n    this.beforeSwitch = beforeSwitch;\r\n    this.afterSwitch = afterSwitch;\r\n    this.onDocumentClick = this.onDocumentClick.bind(this);\r\n  }\r\n\r\n  getDefaultPosition() {\r\n    return 'top-right';\r\n  }\r\n\r\n  onAdd(map) {\r\n    this.map = map;\r\n    this.controlContainer = document.createElement('div');\r\n    this.controlContainer.classList.add('maplibregl-ctrl');\r\n    this.controlContainer.classList.add('maplibregl-ctrl-group');\r\n    this.mapStyleContainer = document.createElement('div');\r\n    this.styleButton = document.createElement('button');\r\n    this.styleButton.type = 'button';\r\n    this.mapStyleContainer.classList.add('maplibregl-style-list');\r\n    for (const style of this.styles) {\r\n      const styleElement = document.createElement('button');\r\n      styleElement.type = 'button';\r\n      styleElement.innerText = style.title;\r\n      styleElement.classList.add(style.title.replace(/[^a-z0-9-]/gi, '_'));\r\n      styleElement.dataset.uri = JSON.stringify(style.uri);\r\n      styleElement.addEventListener('click', (event) => {\r\n        const { srcElement } = event;\r\n        if (srcElement.classList.contains('active')) {\r\n          return;\r\n        }\r\n        this.beforeSwitch();\r\n        this.map.setStyle(JSON.parse(srcElement.dataset.uri));\r\n        this.afterSwitch();\r\n        this.mapStyleContainer.style.display = 'none';\r\n        this.styleButton.style.display = 'block';\r\n        const elms = this.mapStyleContainer.getElementsByClassName('active');\r\n        while (elms[0]) {\r\n          elms[0].classList.remove('active');\r\n        }\r\n        srcElement.classList.add('active');\r\n      });\r\n      if (style.title === this.defaultStyle) {\r\n        styleElement.classList.add('active');\r\n      }\r\n      this.mapStyleContainer.appendChild(styleElement);\r\n    }\r\n    this.styleButton.classList.add('maplibregl-ctrl-icon');\r\n    this.styleButton.classList.add('maplibregl-style-switcher');\r\n    this.styleButton.addEventListener('click', () => {\r\n      this.styleButton.style.display = 'none';\r\n      this.mapStyleContainer.style.display = 'block';\r\n    });\r\n    document.addEventListener('click', this.onDocumentClick);\r\n    this.controlContainer.appendChild(this.styleButton);\r\n    this.controlContainer.appendChild(this.mapStyleContainer);\r\n    return this.controlContainer;\r\n  }\r\n\r\n  onRemove() {\r\n    if (!this.controlContainer || !this.controlContainer.parentNode || !this.map || !this.styleButton) {\r\n      return;\r\n    }\r\n    this.styleButton.removeEventListener('click', this.onDocumentClick);\r\n    this.controlContainer.parentNode.removeChild(this.controlContainer);\r\n    document.removeEventListener('click', this.onDocumentClick);\r\n    this.map = undefined;\r\n  }\r\n\r\n  onDocumentClick(event) {\r\n    if (this.controlContainer && !this.controlContainer.contains(event.target) && this.mapStyleContainer && this.styleButton) {\r\n      this.mapStyleContainer.style.display = 'none';\r\n      this.styleButton.style.display = 'block';\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}